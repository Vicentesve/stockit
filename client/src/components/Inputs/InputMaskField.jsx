import React from "react";
import InputMask from "react-input-mask";
import CardImage from "../Store/CardImage";
import creditCardType from "credit-card-type";

const InputMaskField = ({
  id,
  errors,
  value,
  onChange,
  onFocus,
  mask,
  placeholder,
  label,
}) => {
  const returnCardType = (value) => {
    if (!value) return;
    return creditCardType(value)[0]?.type;
  };

  const typeMask = () => {
    switch (id) {
      case "number":
        return <CardImage type={returnCardType(value)} />;

      case "expiry":
        return (
          <svg
            version="1.0"
            xmlns="http://www.w3.org/2000/svg"
            className="w-6 h-6"
            viewBox="0 0 512.000000 512.000000"
            preserveAspectRatio="xMidYMid meet"
          >
            <g
              transform="translate(0.000000,512.000000) scale(0.100000,-0.100000)"
              fill="#000000"
              stroke="none"
            >
              <path
                d="M725 5028 c-74 -26 -139 -98 -157 -176 l-12 -50 -121 -4 c-116 -4
-123 -5 -185 -39 -43 -23 -78 -52 -102 -84 -73 -97 -69 26 -66 -1695 l3 -1545
27 -51 c40 -76 70 -107 140 -145 l63 -34 842 -3 842 -3 3 -442 c3 -436 3 -443
26 -487 35 -72 75 -114 144 -151 l63 -34 1285 0 1285 0 63 34 c70 38 100 69
140 145 l27 51 0 765 0 765 -34 63 c-37 69 -79 109 -151 144 -43 22 -58 23
-327 26 l-283 3 -2 1242 -3 1242 -28 53 c-35 67 -89 121 -152 152 -49 24 -56
25 -332 28 -249 3 -283 5 -283 19 0 75 -80 181 -157 207 -97 33 -175 15 -248
-59 -47 -47 -75 -102 -75 -149 0 -14 -19 -16 -160 -16 -141 0 -160 2 -160 16
0 76 -80 182 -157 208 -97 33 -175 15 -248 -59 -47 -47 -75 -102 -75 -149 0
-14 -19 -16 -160 -16 -141 0 -160 2 -160 16 0 76 -80 182 -157 208 -97 33
-175 15 -248 -59 -47 -47 -75 -102 -75 -149 0 -14 -19 -16 -160 -16 -141 0
-160 2 -160 16 0 76 -80 182 -157 208 -52 18 -113 20 -158 4z m130 -173 c24
-23 25 -31 25 -135 0 -104 -1 -112 -25 -135 -15 -16 -36 -25 -55 -25 -19 0
-40 9 -55 25 -24 23 -25 31 -25 135 0 104 1 112 25 135 15 16 36 25 55 25 19
0 40 -9 55 -25z m800 0 c24 -23 25 -31 25 -135 0 -104 -1 -112 -25 -135 -15
-16 -36 -25 -55 -25 -19 0 -40 9 -55 25 -24 23 -25 31 -25 135 0 104 1 112 25
135 15 16 36 25 55 25 19 0 40 -9 55 -25z m800 0 c24 -23 25 -31 25 -135 0
-104 -1 -112 -25 -135 -15 -16 -36 -25 -55 -25 -19 0 -40 9 -55 25 -24 23 -25
31 -25 135 0 104 1 112 25 135 15 16 36 25 55 25 19 0 40 -9 55 -25z m800 0
c24 -23 25 -31 25 -135 0 -104 -1 -112 -25 -135 -15 -16 -36 -25 -55 -25 -19
0 -40 9 -55 25 -24 23 -25 31 -25 135 0 104 1 112 25 135 15 16 36 25 55 25
19 0 40 -9 55 -25z m-2695 -231 c0 -47 28 -102 75 -149 73 -74 151 -92 248
-59 77 26 157 132 157 208 0 14 19 16 160 16 141 0 160 -2 160 -16 0 -47 28
-102 75 -149 73 -74 151 -92 248 -59 77 26 157 132 157 208 0 14 19 16 160 16
141 0 160 -2 160 -16 0 -47 28 -102 75 -149 73 -74 151 -92 248 -59 77 26 157
132 157 208 0 14 19 16 160 16 141 0 160 -2 160 -16 0 -47 28 -102 75 -149 73
-74 151 -92 248 -59 77 26 157 132 157 208 0 16 23 17 269 14 254 -3 271 -4
297 -24 68 -50 69 -53 72 -305 l3 -229 -1920 0 -1921 0 0 214 c0 222 4 253 43
295 36 39 75 50 180 51 83 0 97 -2 97 -16z m3520 -1624 l0 -920 -160 0 -160 0
0 255 0 256 -25 24 -24 25 -431 0 -431 0 -24 -25 -25 -24 0 -256 0 -255 -80 0
-80 0 0 255 0 256 -25 24 -24 25 -431 0 -431 0 -24 -25 -25 -24 0 -431 0 -431
25 -24 c23 -24 29 -25 160 -25 l135 0 0 -160 0 -160 -828 2 -829 3 -37 29
c-70 53 -66 -33 -66 1311 l0 1215 1920 0 1920 0 0 -920z m-1600 -600 l0 -80
-320 0 -320 0 0 80 0 80 320 0 320 0 0 -80z m1120 0 l0 -80 -320 0 -320 0 0
80 0 80 320 0 320 0 0 -80z m-1120 -279 l0 -39 -122 -4 c-109 -4 -129 -7 -175
-31 -69 -35 -120 -88 -150 -154 l-24 -53 -85 0 -84 0 0 160 0 160 320 0 320 0
0 -39z m1120 -1 l0 -40 -320 0 -320 0 0 40 0 40 320 0 320 0 0 -40z m1206
-226 c39 -28 63 -63 70 -101 l7 -33 -1362 0 c-1176 0 -1361 2 -1361 14 0 25
21 70 43 95 49 53 -12 51 1329 48 1242 -2 1247 -2 1274 -23z m74 -454 l0 -160
-1360 0 -1360 0 0 160 0 160 1360 0 1360 0 0 -160z m-2 -709 c-3 -376 -4 -391
-24 -417 -11 -15 -33 -37 -48 -48 -27 -21 -30 -21 -1286 -21 -1256 0 -1259 0
-1286 21 -15 11 -37 33 -48 48 -20 26 -21 41 -24 417 l-3 389 1361 0 1361 0
-3 -389z"
              />
              <path
                d="M585 3735 l-25 -24 0 -431 0 -431 25 -24 24 -25 431 0 431 0 24 25
25 24 0 431 0 431 -25 24 -24 25 -431 0 -431 0 -24 -25z m775 -215 l0 -80
-320 0 -320 0 0 80 0 80 320 0 320 0 0 -80z m0 -400 l0 -160 -320 0 -320 0 0
160 0 160 320 0 320 0 0 -160z"
              />
              <path
                d="M1705 3735 l-25 -24 0 -431 0 -431 25 -24 24 -25 431 0 431 0 24 25
25 24 0 431 0 431 -25 24 -24 25 -431 0 -431 0 -24 -25z m775 -215 l0 -80
-320 0 -320 0 0 80 0 80 320 0 320 0 0 -80z m0 -400 l0 -160 -320 0 -320 0 0
160 0 160 320 0 320 0 0 -160z"
              />
              <path
                d="M2825 3735 l-25 -24 0 -431 0 -431 25 -24 24 -25 431 0 431 0 24 25
25 24 0 431 0 431 -25 24 -24 25 -431 0 -431 0 -24 -25z m775 -215 l0 -80
-320 0 -320 0 0 80 0 80 320 0 320 0 0 -80z m0 -400 l0 -160 -320 0 -320 0 0
160 0 160 320 0 320 0 0 -160z"
              />
              <path
                d="M585 2615 l-25 -24 0 -431 0 -431 25 -24 24 -25 431 0 431 0 24 25
25 24 0 431 0 431 -25 24 -24 25 -431 0 -431 0 -24 -25z m775 -215 l0 -80
-320 0 -320 0 0 80 0 80 320 0 320 0 0 -80z m0 -400 l0 -160 -320 0 -320 0 0
160 0 160 320 0 320 0 0 -160z"
              />
              <path
                d="M2345 855 c-25 -24 -25 -26 -25 -215 0 -189 0 -191 25 -215 l24 -25
271 0 271 0 24 25 c25 24 25 26 25 215 0 189 0 191 -25 215 l-24 25 -271 0
-271 0 -24 -25z m455 -215 l0 -80 -160 0 -160 0 0 80 0 80 160 0 160 0 0 -80z"
              />
              <path d="M3920 480 l0 -80 80 0 80 0 0 80 0 80 -80 0 -80 0 0 -80z" />
              <path d="M4240 480 l0 -80 80 0 80 0 0 80 0 80 -80 0 -80 0 0 -80z" />
              <path d="M4560 480 l0 -80 80 0 80 0 0 80 0 80 -80 0 -80 0 0 -80z" />
            </g>
          </svg>
        );

      case "cvc":
        return (
          <svg
            version="1.0"
            xmlns="http://www.w3.org/2000/svg"
            className="w-6 h-6"
            viewBox="0 0 512.000000 512.000000"
            preserveAspectRatio="xMidYMid meet"
          >
            <g
              transform="translate(0.000000,512.000000) scale(0.100000,-0.100000)"
              fill="#000000"
              stroke="none"
            >
              <path
                d="M466 4469 c-62 -15 -153 -68 -197 -116 -22 -24 -55 -74 -72 -111
                            l-32 -67 0 -1376 0 -1375 37 -76 c45 -91 103 -147 196 -191 l67 -32 916 -3
                            916 -3 28 -72 c153 -395 465 -693 858 -821 322 -105 688 -81 994 64 395 187
                            672 544 760 978 17 81 18 188 18 1497 l0 1410 -32 67 c-44 93 -100 151 -191
                            196 l-76 37 -2075 2 c-1231 0 -2092 -3 -2115 -8z m4168 -161 c55 -16 138 -99
                            154 -154 7 -24 12 -100 12 -178 l0 -136 -2240 0 -2240 0 0 136 c0 78 5 154 12
                            178 15 51 99 137 148 153 53 17 4097 17 4154 1z m166 -868 l0 -240 -2240 0
                            -2240 0 0 240 0 240 2240 0 2240 0 0 -240z m0 -837 l0 -438 -51 80 c-206 321
                            -522 537 -897 612 -120 24 -384 24 -504 0 -553 -111 -977 -535 -1085 -1085
                            -18 -95 -24 -323 -10 -429 l8 -63 -867 0 c-651 0 -877 3 -908 12 -55 16 -138  
                            99 -154 154 -9 31 -12 237 -12 818 l0 776 2240 0 2240 0 0 -437z m-940 88
                            c464 -106 807 -455 917 -933 23 -101 23 -373 0 -476 -56 -244 -161 -437 -331
                            -608 -171 -170 -364 -275 -608 -331 -103 -23 -375 -23 -476 0 -484 111 -835
                            462 -938 937 -26 118 -26 362 0 480 76 353 299 650 610 816 135 71 261 112
                            431 138 68 10 312 -4 395 -23z"
              />
              <path
                d="M885 2231 c-91 -23 -173 -90 -215 -176 -34 -69 -35 -198 -2 -265 34
-71 75 -113 144 -151 l63 -34 485 0 485 0 63 34 c70 38 101 70 140 145 22 43
26 64 26 136 1 78 -2 90 -33 148 -37 69 -79 109 -151 144 -45 23 -49 23 -510
25 -256 1 -478 -2 -495 -6z m961 -177 c53 -39 69 -71 69 -134 0 -63 -16 -95
-69 -134 -27 -20 -41 -21 -464 -24 -290 -2 -449 0 -474 8 -101 29 -140 168
-71 251 50 59 46 59 535 56 434 -2 447 -3 474 -23z"
              />
              <path
                d="M2860 1904 c-99 -36 -170 -108 -204 -207 -22 -66 -22 -285 0 -355 25
-76 79 -140 154 -181 60 -33 71 -36 150 -36 73 1 93 5 139 29 100 52 125 102
80 160 -27 35 -71 34 -123 -1 -51 -36 -139 -40 -182 -7 -64 47 -69 63 -69 214
0 151 5 167 69 214 43 33 131 29 182 -6 52 -36 96 -37 123 -2 46 58 15 116
-86 164 -63 30 -171 36 -233 14z"
              />
              <path
                d="M3305 1895 c-14 -13 -25 -34 -25 -46 0 -40 249 -693 272 -711 26 -23
70 -23 96 0 23 18 272 671 272 711 0 31 -43 71 -77 71 -54 0 -66 -19 -153
-254 -47 -124 -87 -226 -90 -226 -3 0 -43 102 -90 226 -55 148 -91 230 -104
240 -31 22 -74 17 -101 -11z"
              />
              <path
                d="M4025 1895 c-14 -13 -25 -34 -25 -46 0 -40 249 -693 272 -711 26 -23
70 -23 96 0 23 18 272 671 272 711 0 31 -43 71 -77 71 -54 0 -66 -19 -153
-254 -47 -124 -87 -226 -90 -226 -3 0 -43 102 -90 226 -55 148 -91 230 -104
240 -31 22 -74 17 -101 -11z"
              />
            </g>
          </svg>
        );

      default:
        break;
    }
  };

  return (
    <div className="relative w-full">
      <label
        className="block mb-2 text-sm font-medium text-gray-900 dark:text-gray-300"
        htmlFor="cardNumber"
      >
        {label}
      </label>

      <div className="relative">
        <InputMask
          id={id}
          name={id}
          value={value}
          onChange={onChange}
          onFocus={onFocus}
          maskChar={null}
          mask={mask}
          placeholder={placeholder}
          className="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
        />

        <span className="absolute inset-y-3 right-3 w-[34px] h-6 flex justify-center items-center border border-neutral-100">
          {typeMask(value)}
        </span>
      </div>
      <span className="absolute mt-1 text-xs font-medium text-red-600 dark:text-red-400">
        {errors}
      </span>
    </div>
  );
};

export default InputMaskField;
